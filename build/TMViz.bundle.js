var TMViz=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/build/",r(r.s=24)}([function(t,e){t.exports=d3},function(t,e){t.exports=_},function(t,e){t.exports=lodash},function(t,e,r){"use strict";var n=/*@cc_on!@*/Boolean(document.documentMode)||Boolean(window.StyleMedia);e.nonNull=function(t){if(null==t)throw new Error("expected a non-null defined value, but got: "+String(t));return t},e.coalesce=function(t,e){return null!=t?t:e},e.applyMaybe=function(t,e){return null!=e?t(e):e},e.getFirst=function(t,e){for(var r=0;r<e.length;++r){var n=t(e[r]);if(null!=n)return n}},e.toDocFragment=function(t){var e=document.createDocumentFragment();return t.forEach(e.appendChild.bind(e)),e},e.isBrowserIEorEdge=n},,function(t,e,r){"use strict";function n(t,e,r){this.transition=t,this.state=e,this.tapes=r}function i(t,e,r){switch(e){case"R":t.headRight(r);break;case"L":t.headLeft(r);break;case"H":break;default:throw new TypeError("not a valid tape movement: "+String(e))}}n.prototype.toString=function(){return String(this.state)+"\n"+this.tapes.map(String).join("\n")},n.prototype.step=function(t){let e=this.nextInstruction;if(null==e)return!1;for(let r=0;r<this.tapes.length;r++)this.tapes[r].write(e.symbol[r]),i(this.tapes[r],e.move[r],t);return this.state=e.state,!0},Object.defineProperties(n.prototype,{nextInstruction:{get:function(){return this.transition(this.state,this.tapes.reduce((t,e)=>t+e.read(),""))},enumerable:!0},isHalted:{get:function(){return null==this.nextInstruction},enumerable:!0}}),e.TuringMachine=n},function(t,e,r){"use strict";function n(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n)throw new TypeError("Cannot watch nonexistent property '"+e+"'");if(!n.configurable)throw new TypeError("Cannot watch non-configurable property '"+e+"'");if(n.writable||void 0!==n.set){var i=function(){if(n.set)return{get:n.get,set:function(i){return n.set.call(t,r.call(t,e,t[e],i))}};var i=n.value;return{get:function(){return i},set:function(n){return i=r.call(t,e,i,n)}}}();return Object.defineProperty(t,e,i),n}}e.watch=n,e.watchInit=function(t,e,r){var i=t[e],a=n(t,e,r);return a&&(t[e]=i),a}},,function(t,e,r){"use strict";const n=r(5).TuringMachine,i=r(9),a=r(12),o=r(13),s=r(6).watchInit,u=r(0);function c(t,e=250){return u.select(t.domNode).classed("active-edge",!0).transition().duration(e/2).style("stroke-width","3px").transition().duration(e/2).style("stroke-width","1px").transition().duration(0).each("start",(function(){u.select(this).classed("active-edge",!1)})).style("stroke",null).style("stroke-width",null)}function l(t,e){let r=0===e.tapes?1:e.tapes,n=[];for(let i=0;i<r;i++)n.push(p(t,e,i));return n}function p(t,e,r){return new i(t.append("svg").attr("class","tm-tape"),9,e.blank,e.input&&e.input[r]?String(e.input[r]).split(""):[])}function f(t,e,r){t=u.select(t);let i=new a(e.table);this.stateviz=new o(t,i.getVertexMap(),i.getEdges()),void 0!==r&&(this.positionTable=r),this.edgeAnimation=c,this.stepInterval=50,this.animationDuration=250;const p=this;this.machine=new n(function(t,e){return function(r,n){let i=t.getInstructionAndEdge(r,n);return null==i?null:(e(i.edge),i.instruction)}}(i,(function(t){let e=p.edgeAnimation(t,p.animationDuration);p.isRunning&&e.transition().duration(p.stepInterval).each("end",(function(){p.isRunning&&p.step(p.animationDuration)}))})),e.startState,l(t,e)),s(this.machine,"state",(function(t,e,r){return u.select(i.getVertex(e).domNode).classed("current-state",!1),u.select(i.getVertex(r).domNode).classed("current-state",!0),r})),this.isHalted=!1;let f=!1;Object.defineProperty(this,"isRunning",{configurable:!0,get:function(){return f},set:function(t){f!==t&&(f=t,f&&this.step())}}),this.__parentDiv=t,this.__spec=e}f.prototype.step=function(t){this.machine.step(t)||(this.isRunning=!1,this.isHalted=!0)},f.prototype.reset=function(){this.isRunning=!1,this.isHalted=!1,this.machine.state=this.__spec.startState;for(const t of this.machine.tapes)t.domNode.remove();this.machine.tapes=l(this.__parentDiv,this.__spec)},Object.defineProperty(f.prototype,"positionTable",{get:function(){return this.stateviz.positionTable},set:function(t){this.stateviz.positionTable=t}}),t.exports=f},function(t,e,r){"use strict";var n=r(10),i=r(0);r(11);function a(t){return t.attr("class","tape-cell"),t.append("rect").datum(null).attr({width:50,height:50}),t.append("text").text((function(t){return t})).attr({x:25,y:33}),t}function o(t,e){return e=null==e?0:e,t.attr("transform",(function(t,r){return"translate("+(50*(r+e)-40)+")"})),t}function s(t){t.attr("transform","translate(0 10)").transition().duration(0).select(".exiting").remove()}function u(t,e,r,i){n.call(this,r,i),Object.defineProperty(this,"lookaround",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"domNode",{value:t,writable:!1,enumerable:!0});var u=50*(e+1+e-2)+20,c=70;t.attr({width:"95%",viewBox:[0,0,u,c].join(" ")}),this.wrapper=t.append("g").attr("class","wrapper").call(s),t.append("rect").attr({id:"tape-head",width:60,height:60,x:50*e-45,y:5}),this.wrapper.selectAll(".tape-cell").data(this.readRange(-e,e)).enter().append("g").call(a).call(o)}function c(t,e,r,n,i,u=250){e.call(a),r.classed("exiting",!0),t.selectAll(".tape-cell").call(o,i),t.attr("transform","translate("+(50*n).toString()+" 10)").transition().duration(u).call(s)}u.prototype=Object.create(n.prototype),u.prototype.constructor=u,u.prototype.write=function(t){n.prototype.read.call(this)!==t&&(n.prototype.write.call(this,t),this.wrapper.selectAll(".exiting").remove(),i.select(this.wrapper[0][0].childNodes[this.lookaround]).datum(t).select("text").attr("fill-opacity","1").attr("stroke-opacity","1").transition().attr("fill-opacity","0.4").attr("stroke-opacity","0.1").transition().text((function(t){return t})).attr("fill-opacity","1").attr("stroke-opacity","1").transition().duration(0).attr("fill-opacity",null).attr("stroke-opacity",null))},u.prototype.headRight=function(t=250){n.prototype.headRight.call(this),this.wrapper.selectAll(".exiting").remove(),c(this.wrapper,this.wrapper.append("g").datum(this.readOffset(this.lookaround)),this.wrapper.select(".tape-cell"),1,-1,t)},u.prototype.headLeft=function(t=250){n.prototype.headLeft.call(this),this.wrapper.selectAll(".exiting").remove(),c(this.wrapper,this.wrapper.insert("g",":first-child").datum(this.readOffset(-this.lookaround)),this.wrapper.select(".wrapper > .tape-cell:last-of-type"),-1,0,t)},t.exports=u},function(t,e,r){"use strict";var n=r(1);function i(t,e){Object.defineProperty(this,"blank",{value:t,writable:!1,enumerable:!0}),this.tape={before:[],after:null==e||0==e.length?[t]:e.slice().reverse(),toString:function(){return this.before.join("")+"🔎"+this.after.slice().reverse().join("")}}}i.prototype.read=function(){return n.last(this.tape.after)},i.prototype.write=function(t){this.tape.after[this.tape.after.length-1]=t},i.prototype.headRight=function(){var t=this.tape.before,e=this.tape.after;t.push(e.pop()),n.isEmpty(e)&&e.push(this.blank)},i.prototype.headLeft=function(){var t=this.tape.before,e=this.tape.after;n.isEmpty(t)&&t.push(this.blank),e.push(t.pop())},i.prototype.toString=function(){return this.tape.toString()},i.prototype.readOffset=function(t){var e=this.tape;return t>=0?t<=e.after.length-1?e.after[e.after.length-1-t]:this.blank:t>=-e.before.length?e.before[e.before.length+t]:this.blank},i.prototype.readRange=function(t,e){return n.range(t,e+1).map((function(t){return this.readOffset(t)}),this)},t.exports=i},function(t,e,r){t.exports=r.p+"tape/tape.css"},function(t,e,r){"use strict";var n=r(2);function i(t){var e=n.mapValues(t,(function(t,e){return{label:e,transitions:t}})),r=[];return n.forEach(e,(function(i,s){i.transitions=i.transitions&&function(){let u={},c={};return n.forEach(i.transitions,(function(l,p){let f=p.split(",").reduce((function(t,e){return""===e&&""===t[t.length-1]?t[t.length-1]=",":t.push(e),t}),[]),h=function(a,o){let s=c[a]||n.tap(c[a]={source:i,target:e[a],labels:[]},r.push.bind(r));return t.tapes<3&&s.labels.push(o),s}(null!=l.state?l.state:s,function(t,e){var r=(null==e.symbol?"":o(String(e.symbol))+",")+String(e.move);return t.map(o).join(",")+"→"+r}(f,l));f.forEach((function(t){u[t]={instruction:a(s,t,l),edge:h}}))})),u}()})),{graph:e,edges:r}}function a(t,e,r){if(e=e.split(""),r.symbol)for(let t=0;t<e.length;t++)r.symbol[t]&&(e[t]=r.symbol[t]);return n.defaults({symbol:e.join("")},r,{state:t})}function o(t){return" "===t?"␣":t}function s(t){var e=i(t);Object.defineProperties(this,{__graph:{value:e.graph},__edges:{value:e.edges}})}s.prototype.getVertexMap=function(){return this.__graph},s.prototype.getEdges=function(){return this.__edges},s.prototype.getVertex=function(t){return this.__graph[t]},s.prototype.getInstructionAndEdge=function(t,e){var r=this.__graph[t];if(void 0===r)throw new Error("not a valid state: "+String(t));return r.transitions&&r.transitions[e]},t.exports=s},function(t,e,r){"use strict";var n=r(3).isBrowserIEorEdge,i=r(0),a=r(1),o=r(2).assign;function s(t,e){return t.map((function(t,r){return t+e[r]}))}function u(t,e){return s(t,e.map((function(t){return-t})))}function c(t){return Math.sqrt(function(t){return t.map((function(t){return t*t})).reduce((function(t,e){return t+e}),0)}(t))}function l(t,e){return[Math.cos(e)*t,Math.sin(e)*t]}function p(t){t.forEach((function(t){var e=t.source.index+","+t.target.index;this[e]=(this[e]||0)+1}),this)}p.prototype.numEdgesFromTo=function(t,e){return this[String(t)+","+String(e)]||0};var f=Object.freeze({loop:{},arc:{},straight:{}});function h(t,e,r){var n,i;return e===f.loop?(n=l(t,-15*Math.PI/180),i=" a 19,27 45 1,1 "+n[0]+","+(n[1]+t),function(){return"M "+r.source.x+","+(r.source.y-t)+i}):e===f.arc?function(){var e,n,i,a=[r.source.x,r.source.y],o=[r.target.x,r.target.y],p=u(o,a),f=1.2*c(p),h=(n=(e=p)[0],i=e[1],Math.atan2(i,n)),d=-Math.PI/2/2,g=s(a,l(t,h+d)),y=s(o,l(t,h+Math.PI-d));return a[0]<=o[0]?"M "+g[0]+" "+g[1]+" A "+f+" "+f+" 0 0,1 "+y[0]+" "+y[1]:"M "+y[0]+" "+y[1]+" A "+f+" "+f+" 0 0,0 "+g[0]+" "+g[1]}:e===f.straight?function(){var e=[r.source.x,r.source.y],n=[r.target.x,r.target.y],i=u(n,e);if(0===i[0]&&0===i[1])return null;var a,o,s=u(n,function(t,e){return t.map((function(t){return e*t}))}((o=c(a=i),a.map((function(t){return t/o}))),t));return"M "+e[0]+" "+e[1]+" L "+s[0]+" "+s[1]}:void 0}function d(t){return t}function g(){}function y(t,e,r){return Math.max(t,Math.min(r,e))}p.prototype.shapeForEdge=function(t){return t.target.index===t.source.index?f.loop:this.numEdgesFromTo(t.target.index,t.source.index)?f.arc:f.straight};var v=n?function(t,e){return t.append("div").style({width:"100%",height:"0","padding-bottom":100*e+"%",position:"relative"}).append("svg").style({position:"absolute",top:"0",left:"0"})}:function(t){return t.append("svg")};function m(t,e,r){var n=800,o=500,s=i.scale.category10(),u=v(t,o/n);u.attr({viewBox:[0,0,n,o].join(" "),version:"1.1",":xmlns":"http://www.w3.org/2000/svg",":xmlns:xlink":"http://www.w3.org/1999/xlink"});var c=e instanceof Array?e:a.values(e);this.__stateMap=e;var l=i.layout.force().nodes(c).links(r).size([n,o]).linkDistance([140]).charge([-500]).theta(.1).gravity(.05).start(),m=l.drag().on("dragstart",(function(t){t.fixed=!0,u.transition().style("box-shadow","inset 0 0 1px gold")})).on("dragend",(function(){u.transition().style("box-shadow",null)})),b=new p(r),x=u.selectAll(".edgepath").data(r).enter().append("g"),w=function(t,e){return String(-1.1*(e+1))+"em"},k=function(t,e){return String(.6+1.1*(e+1))+"em"};x.each((function(t,e){var r=i.select(this),n=r.append("path").attr({class:"edgepath",id:"edgepath"+e}).each((function(t){t.domNode=this})),a=r.selectAll(".edgelabel").data(t.labels).enter().append("text").attr("class","edgelabel");a.append("textPath").attr("xlink:href",(function(){return"#edgepath"+e})).attr("startOffset","50%").text(d);var o=b.shapeForEdge(t);switch(t.getPath=h(20,o,t),o){case f.straight:a.attr("dy",w),t.refreshLabels=function(){a.attr("transform",(function(){if(t.target.x<t.source.x){var e={x:(r=this.getBBox()).x+r.width/2,y:r.y+r.height/2};return"rotate(180 "+e.x+" "+e.y+")"}return null;var r}))};break;case f.arc:var s;t.refreshLabels=function(){var e=t.target.x<t.source.x;e!==s&&(n.classed("reversed-arc",e),a.attr("dy",e?k:w),s=e)};break;case f.loop:a.attr("transform",(function(t,e){return"translate("+String(8*(e+1))+" "+String(-8*(e+1))+")"})),t.refreshLabels=g}}));var _=x.selectAll(".edgepath"),S=u.selectAll(".node").data(c).enter(),M=S.append("circle").attr("class","node").attr("r",20).style("fill",(function(t,e){return s(e)})).each((function(t){t.domNode=this})).on("dblclick",(function(t){t.fixed=!1,l.resume()})).call(m),O=S.append("text").attr("class","nodelabel").attr("dy","0.25em").text((function(t){return t.label}));u.append("defs").selectAll("marker").data(["arrowhead","active-arrowhead","reversed-arrowhead","reversed-active-arrowhead"]).enter().append("marker").attr({id:function(t){return t},viewBox:"0 -5 10 10",refX:function(t){return 0===t.lastIndexOf("reversed-",0)?0:10},orient:"auto",markerWidth:10,markerHeight:10}).append("path").attr("d","M 0 -5 L 10 0 L 0 5 Z").attr("transform",(function(t){return 0===t.lastIndexOf("reversed-",0)?"rotate(180 5 0)":null}));var j=".edgepath {  marker-end: url(#arrowhead);}.edgepath.active-edge {  marker-end: url(#active-arrowhead);}.edgepath.reversed-arc {  marker-start: url(#reversed-arrowhead);  marker-end: none;}.edgepath.active-edge.reversed-arc {  marker-start: url(#reversed-active-arrowhead);  marker-end: none;}";u.append("style").each((function(){this.styleSheet?this.styleSheet.cssText=j:this.textContent=j})),l.on("tick",(function(){M.attr({cx:function(t){return t.x=y(20,n-20,t.x)},cy:function(t){return t.y=y(20,o-20,t.y)}}),O.attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})),_.attr("d",(function(t){return t.getPath()})),x.each((function(t){t.refreshLabels()})),c.every((function(t){return t.fixed}))&&l.stop()})),this.force=l}r(14);var b=a.mapValues(a.pick(["x","y","px","py","fixed"]));Object.defineProperty(m.prototype,"positionTable",{get:function(){return b(this.__stateMap)},set:function(t){!function(t,e){a.forEach((function(e,r){var n=t[r];void 0!==n&&o(e,n)}),e)}(t,this.__stateMap),this.force.resume()}}),t.exports=m},function(t,e,r){t.exports=r.p+"state-diagram/StateViz.css"},,,,,,,,,,function(t,e,r){t.exports=r(8)}]);
//# sourceMappingURL=TMViz.bundle.js.map