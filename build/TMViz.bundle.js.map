{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/external \"d3\"","webpack://[name]/external \"_\"","webpack://[name]/external \"lodash\"","webpack://[name]/./src/util.js","webpack://[name]/./src/watch.js","webpack://[name]/./src/TMViz.js","webpack://[name]/./src/TuringMachine.js","webpack://[name]/./src/tape/TapeViz.js","webpack://[name]/./src/tape/Tape.js","webpack://[name]/./src/tape/tape.css","webpack://[name]/./src/state-diagram/StateGraph.js","webpack://[name]/./src/state-diagram/StateViz.js","webpack://[name]/./src/state-diagram/StateViz.css"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","d3","_","lodash","isBrowserIEorEdge","Boolean","document","documentMode","window","StyleMedia","nonNull","Error","String","coalesce","a","b","applyMaybe","f","x","getFirst","xs","length","val","toDocFragment","array","result","createDocumentFragment","forEach","appendChild","watch","thisArg","prop","handler","desc","getOwnPropertyDescriptor","undefined","TypeError","configurable","writable","set","accessors","newval","watchInit","TuringMachine","TapeViz","StateGraph","StateViz","pulseEdge","edge","duration","select","domNode","classed","transition","style","each","this","addTapes","div","spec","tapes","input","number","push","addTape","append","attr","blank","split","vis","TMViz","posTable","graph","table","colors","stateviz","getVertexMap","getEdges","positionTable","titles","info","edgeAnimation","stepInterval","animationDuration","self","machine","animationCallback","state","symbol","tuple","getInstructionAndEdge","instruction","animatedTransition","isRunning","step","startState","oldstate","newstate","getVertex","isHalted","__parentDiv","__spec","reset","tape","remove","move","direction","headRight","headLeft","toString","map","join","instruct","nextInstruction","write","visualize","defineProperties","reduce","acc","read","Tape","initTapeCells","selection","datum","text","cellWidth","cellHeight","positionCells","offset","repositionWrapper","wrapper","svg","lookaround","width","height","selectAll","data","readRange","enter","moveHead","exit","wOffset","cOffset","constructor","smooth","rule","all","cur","dir","skip","querySelector","textContent","chars","includes","classList","add","color","childNodes","readOffset","insert","before","after","slice","reverse","last","pop","isEmpty","start","end","range","deriveGraph","color_table","mapValues","transitions","label","allEdges","vertex","stateTransitions","cache","symbolKey","symbols","target","tap","source","labels","edgeTo","action","rightSide","visibleSpace","labelFor","normalize","edges","defaults","derived","__graph","__edges","assign","addV","array1","array2","subtractV","normV","Math","sqrt","y","normSqV","vectorFromLengthAngle","angle","cos","sin","EdgeCounter","e","index","numEdgesFromTo","src","EdgeShape","freeze","loop","arc","straight","edgePathFor","nodeRadius","shape","loopEndOffset","loopArc","PI","p1","p2","radius","atan2","sep","scalar","multiplyV","identity","noop","limitRange","min","max","shapeForEdge","appendSVGTo","hwRatio","position","top","left","container","nodes","linkArray","w","h","scale","category10","nodeArray","Array","values","__stateMap","force","layout","links","size","linkDistance","charge","theta","gravity","drag","on","fixed","row","round","py","px","edgeCounter","edgegroups","labelAbove","labelBelow","edgeD","edgeIndex","group","edgepath","getPath","refreshLabels","svgrect","getBBox","isFlipped","shouldFlip","edgepaths","nodeSelection","nodecircles","resume","nodelabels","lastIndexOf","svgCSS","styleSheet","cssText","cx","cy","every","stop","getPositionTable","pick","stateMap","node","setPositionTable"],"mappings":"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","file":"TMViz.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n","module.exports = d3;","module.exports = _;","module.exports = lodash;","'use strict';\n// misc. utilities\n\n//////////////////////////////////\n// Utilities for null/undefined //\n//////////////////////////////////\n\n// Assert non-null.\n// Return the value if it is not null or undefined; otherwise, throw an error.\nfunction nonNull(value) {\n  if (value == null) {\n    throw new Error('expected a non-null defined value, but got: ' + String(value));\n  }\n  return value;\n}\n\n// Null coalescing: iff the first argument is null or undefined, return the second.\nfunction coalesce(a, b) {\n  return (a != null) ? a : b;\n}\n\n// Apply a function to a value if non-null, otherwise return the value.\n// (Monadic bind for maybe (option) type.)\n// ((a -> b), ?a) -> ?b\nfunction applyMaybe(f, x) {\n  return (x != null) ? f(x) : x;\n}\n\n// Returns the first function result that is not null or undefined.\n// Otherwise, returns undefined.\n// ((a -> ?b), [a]) -> ?b\nfunction getFirst(f, xs) {\n  for (var i = 0; i < xs.length; ++i) {\n    var val = f(xs[i]);\n    if (val != null) {\n      return val;\n    }\n  }\n}\n\n/////////\n// DOM //\n/////////\n\n/* global document */\n\n/**\n * Concat an array of DOM Nodes into a DocumentFragment.\n * @param  {[Node]} array\n * @return {DocumentFragment}\n */\nfunction toDocFragment(array) {\n  var result = document.createDocumentFragment();\n  array.forEach(result.appendChild.bind(result));\n  return result;\n}\n\n///////////////////////\n// IE/Edge detection //\n///////////////////////\n\n// http://stackoverflow.com/a/9851769\nvar isBrowserIEorEdge = /*@cc_on!@*/false\n  || Boolean(document.documentMode) || Boolean(window.StyleMedia); // eslint-disable-line\n\n\nexports.nonNull = nonNull;\nexports.coalesce = coalesce;\nexports.applyMaybe = applyMaybe;\nexports.getFirst = getFirst;\n\nexports.toDocFragment = toDocFragment;\n\nexports.isBrowserIEorEdge = isBrowserIEorEdge;\n","'use strict';\n/**\n * Lightweight property assignment watching by overriding getters/setters.\n * Intended as a bridge between plain JS properties and other libraries.\n *\n * Inspired by https://gist.github.com/eligrey/384583, which works for\n * data properties only, this works for both data and accessor properties.\n *\n * 2015-11-21\n * @author Andy Li\n */\n\n/**\n * Watches a property for assignment by overriding it with a getter & setter\n * on top of the previous value or accessors.\n *\n * The handler can intercept assignments by returning a different value.\n * Watching an unwritable/unsettable property does nothing, but trying to watch\n * a non-existent or non-configurable property fails fast with TypeError.\n * @param  {!Object} thisArg The object that contains the property.\n * @param  {String}  prop    The name of the property to watch.\n * @param            handler The function to call when the property is\n *   assigned to. Important: this function intercepts assignment;\n *   its return value is set as the new value.\n * @throws {TypeError} if object is null or does not have the property\n * @throws {TypeError} if thisArg.prop is non-configurable\n * @return {?Object}         The previous property descriptor, or null if the\n *   property is not writable/settable.\n */\nfunction watch(thisArg, prop, handler) {\n  var desc = Object.getOwnPropertyDescriptor(thisArg, prop);\n  // check pre-conditions: existent, configurable, writable/settable\n  if (desc === undefined) {\n    throw new TypeError('Cannot watch nonexistent property \\''+prop+'\\'');\n  } else if (!desc.configurable) {\n    throw new TypeError('Cannot watch non-configurable property \\''+prop+'\\'');\n  } else if (!desc.writable && desc.set === undefined) {\n    return; // no-op since property can't change without reconfiguration\n  }\n\n  var accessors = (function () {\n    if (desc.set) {\n      // case: .get/.set\n      return {\n        get: desc.get,\n        set: function (newval) {\n          return desc.set.call(thisArg, handler.call(thisArg, prop, thisArg[prop], newval));\n        }\n      };\n    } else {\n      // case: .value\n      var val = desc.value;\n      return {\n        get: function () {\n          return val;\n        },\n        set: function (newval) {\n          return val = handler.call(thisArg, prop, val, newval);\n        }\n      };\n    }\n  })();\n  Object.defineProperty(thisArg, prop, accessors);\n\n  return desc;\n}\n\n/**\n * {@link watch} that, if successful, also calls the handler once with\n *   the current value (by setting it).\n * @see watch\n */\nfunction watchInit(thisArg, prop, handler) {\n  var value = thisArg[prop];\n  var desc = watch(thisArg, prop, handler);\n  if (desc) { thisArg[prop] = value; }\n  return desc;\n}\n\nif (typeof exports === 'object') {\n  exports.watch = watch;\n  exports.watchInit = watchInit;\n}\n","'use strict'\n/**\n * Turing machine visualization component.\n *\n * • Adds running and reset on top of the base Turing machine.\n * • Displays an animated state diagram and tape diagram.\n * Does not include UI elements for controlling the machine.\n *\n * @module\n */\n\nconst TuringMachine = require('./TuringMachine').TuringMachine\nconst TapeViz = require('./tape/TapeViz')\nconst StateGraph = require('./state-diagram/StateGraph')\nconst StateViz = require('./state-diagram/StateViz')\nconst watchInit = require('./watch').watchInit\nconst d3 = require('d3')\n\n/**\n * Create an animated transition function.\n * @param  {StateGraph} graph\n * @param  {LayoutEdge -> any} animationCallback\n * @return {(string, string) -> Instruction} Created transition function.\n */\nfunction animatedTransition(graph, animationCallback) {\n    return function (state, symbol) {\n        let tuple = graph.getInstructionAndEdge(state, symbol)\n        if (tuple == null) {\n            return null\n        }\n\n        animationCallback(tuple.edge)\n        return tuple.instruction\n    }\n}\n\n/**\n * Default edge animation callback.\n * @param  {{domNode: Node}} edge\n * @param  {number} duration of animation\n * @return {D3Transition} The animation. Use this for transition chaining.\n */\nfunction pulseEdge(edge, duration=250) {\n    let edgepath = d3.select(edge.domNode)\n    return edgepath\n        .classed('active-edge', true)\n        .transition()\n        .duration(duration / 2)\n        .style('stroke-width', '3px')\n        .transition()\n        .duration(duration / 2)\n        .style('stroke-width', '1px')\n        .transition()\n        .duration(0)\n        .each('start', /* @this edge */ function () {\n            d3.select(this).classed('active-edge', false)\n        })\n        .style('stroke', null)\n        .style('stroke-width', null)\n}\n\nfunction addTapes(div, spec) {\n    if (spec.tapes === 0 && typeof spec.input === 'string') {\n        spec.input = [spec.input]\n    }\n    let number = spec.tapes === 0 ? 1 : spec.tapes\n    let tapes = []\n    for (let i = 0; i < number; i++) {\n        tapes.push(addTape(div, spec, i))\n    }\n    return tapes\n}\n\nfunction addTape(div, spec, i) {\n    return new TapeViz(\n        div.append('svg').attr('class', 'tm-tape'),\n        9,\n        spec.blank,\n        spec.input && spec.input[i] ? String(spec.input[i]).split('') : [],\n        spec.vis[i],\n    )\n}\n\n/**\n * Construct a new state and tape visualization inside a &lt;div&gt;.\n * @constructor\n * @param {HTMLDivElement} div        div to take over and use.\n * @param                  spec       machine specification\n * @param {?PositionTable} [posTable]  position table for the state nodes\n */\nfunction TMViz(div, spec, posTable) {\n    div = d3.select(div)\n    let graph = new StateGraph(spec.table, spec.vis.colors)\n    this.stateviz = new StateViz(\n        div,\n        graph.getVertexMap(),\n        graph.getEdges(),\n    )\n    if (posTable !== undefined && posTable !== null) {\n        this.positionTable = posTable\n    }\n\n    this.titles = spec.titles\n    this.info = spec.info\n    this.edgeAnimation = pulseEdge\n    this.stepInterval = 50\n    this.animationDuration = 500\n\n    const self = this\n\n    // We hook into the animation callback to know when to start the next step (when running).\n    function animateAndContinue(edge) {\n        let transition = self.edgeAnimation(edge, self.animationDuration)\n        if (self.isRunning) {\n            transition.transition().duration(self.stepInterval).each('end', function () {\n                // stop if machine was paused during the animation\n                if (self.isRunning) {\n                    self.step(self.animationDuration)\n                }\n            })\n        }\n    }\n\n    this.machine = new TuringMachine(\n        animatedTransition(graph, animateAndContinue),\n        spec.startState,\n        addTapes(div, spec),\n    )\n    // intercept and animate when the state is set\n    watchInit(this.machine, 'state', function (prop, oldstate, newstate) {\n        d3.select(graph.getVertex(oldstate).domNode).classed('current-state', false)\n        d3.select(graph.getVertex(newstate).domNode).classed('current-state', true)\n        return newstate\n    })\n\n    // Sidenote: each \"Step\" click evaluates the transition function once.\n    // Therefore, detecting halting always requires its own step (for consistency).\n    this.isHalted = false\n\n    let isRunning = false\n    /**\n     * Set isRunning to true to run the machine, and false to stop it.\n     */\n    Object.defineProperty(this, 'isRunning', {\n        configurable: true,\n        get: function () {\n            return isRunning\n        },\n        set: function (value) {\n            if (isRunning !== value) {\n                isRunning = value\n                if (isRunning) {\n                    this.step()\n                }\n            }\n        },\n    })\n\n    this.__parentDiv = div\n    this.__spec = spec\n}\n\n/**\n * Step the machine immediately and interrupt any animations.\n */\nTMViz.prototype.step = function (duration) {\n    if (!this.machine.step(duration)) {\n        this.isRunning = false\n        this.isHalted = true\n    }\n}\n\n/**\n * Reset the Turing machine to its starting configuration.\n */\nTMViz.prototype.reset = function () {\n    this.isRunning = false\n    this.isHalted = false\n    this.machine.state = this.__spec.startState\n    for (const tape of this.machine.tapes) {\n        tape.domNode.remove()\n    }\n    this.machine.tapes = addTapes(this.__parentDiv, this.__spec)\n}\n\nObject.defineProperty(TMViz.prototype, 'positionTable', {\n    get: function () {\n        return this.stateviz.positionTable\n    },\n    set: function (posTable) {\n        this.stateviz.positionTable = posTable\n    },\n})\n\nmodule.exports = TMViz\n","'use strict'\n\n/**\n * Construct a Turing machine.\n * @param {(state, symbol) -> ?{state: state, symbol: symbol, move: direction}} transition\n *   A transition function that, given *only* the current state and symbol,\n *   returns an object with the following properties: symbol, move, and state.\n *   Returning null/undefined halts the machine (no transition defined).\n * @param {state} startState  The state to start in.\n * @param         tapes        The tape to use.\n */\nfunction TuringMachine(transition, startState, tapes) {\n    this.transition = transition\n    this.state = startState\n    this.tapes = tapes\n}\n\nTuringMachine.prototype.toString = function () {\n    return String(this.state) + '\\n' + this.tapes.map(String).join('\\n')\n}\n\n/**\n * Step to the next configuration according to the transition function.\n * @return {boolean} true if successful (the transition is defined),\n *   false otherwise (machine halted)\n */\nTuringMachine.prototype.step = function (duration) {\n    let instruct = this.nextInstruction\n    if (instruct == null) {\n        return false\n    }\n\n    for (let i = 0; i < this.tapes.length; i++) {\n        this.tapes[i].write(instruct.symbol[i], duration)\n        move(this.tapes[i], instruct.move[i], duration)\n    }\n    for (let i = 0; i < this.tapes.length; i++) {\n        this.tapes[i].visualize(instruct.state, this.state === instruct.state)\n    }\n    this.state = instruct.state\n\n    return true\n}\n\nObject.defineProperties(TuringMachine.prototype, {\n    nextInstruction: {\n        get: function () {\n            return this.transition(this.state,\n                this.tapes.reduce((acc, tape) => acc + tape.read(), ''))\n        },\n        enumerable: true,\n    },\n    isHalted: {\n        get: function () {\n            return this.nextInstruction == null\n        },\n        enumerable: true,\n    },\n})\n\n// Allows for both notational conventions of moving the head or moving the tape\nfunction move(tape, direction, duration) {\n    switch (direction) {\n        case 'R':\n            tape.headRight(duration)\n            break\n        case 'L':\n            tape.headLeft(duration)\n            break\n        case 'H':\n            break\n        default:\n            throw new TypeError('not a valid tape movement: ' + String(direction))\n    }\n}\n\nexports.TuringMachine = TuringMachine\n","'use strict'\nconst Tape = require('./Tape.js')\nconst d3 = require('d3')\nrequire('./tape.css')\n\nconst cellWidth = 50\nconst cellHeight = 50\n\nfunction initTapeCells(selection) {\n    selection.attr('class', 'tape-cell')\n    selection.append('rect')\n        // the box outline is purely visual, so remove its data binding\n        .datum(null)\n        .attr({\n            'width': cellWidth,\n            'height': cellHeight,\n        })\n    selection.append('text')\n        .text(function (d) {\n            return d\n        })\n        .attr({'x': cellWidth / 2, 'y': cellHeight / 2 + 8})\n    return selection\n}\n\nfunction positionCells(selection, offset) {\n    offset = (offset == null) ? 0 : offset\n    selection.attr('transform', function (d, i) {\n        return 'translate(' + (-cellWidth + 10 + cellWidth * (i + offset)) + ')'\n    })\n    return selection\n}\n\nfunction repositionWrapper(wrapper) {\n    wrapper.attr('transform', 'translate(0 10)')\n        .transition()\n        .duration(0)\n        .select('.exiting')\n        .remove()\n}\n\n// Tape visualization centered around the tape head.\nfunction TapeViz(svg, lookaround, blank, input, vis) {\n    Tape.call(this, blank, input)\n\n    this.vis = vis\n\n    Object.defineProperty(this, 'lookaround', {\n        value: lookaround,\n        writable: false,\n        enumerable: true,\n    })\n    Object.defineProperty(this, 'domNode', {\n        value: svg,\n        writable: false,\n        enumerable: true,\n    })\n\n    // width is before + head + after, trimming 2 off to show cut-off tape ends\n    var width = cellWidth * (lookaround + 1 + lookaround - 2) + 2 * 10\n    var height = cellHeight + 2 * 10\n    svg.attr({\n        'width': '95%',\n        'viewBox': [0, 0, width, height].join(' '),\n    })\n\n    this.wrapper = svg.append('g')\n        .attr('class', 'wrapper')\n        .call(repositionWrapper)\n\n    svg.append('rect')\n        .attr({\n            'id': 'tape-head',\n            'width': (1 + 1 / 5) * cellWidth,\n            'height': (1 + 1 / 5) * cellHeight,\n            'x': -cellWidth + 10 / 2 + cellWidth * lookaround,\n            'y': 10 / 2,\n        })\n\n    this.wrapper.selectAll('.tape-cell')\n        .data(this.readRange(-lookaround, lookaround))\n        .enter()\n        .append('g')\n        .call(initTapeCells)\n        .call(positionCells)\n\n}\n\nTapeViz.prototype = Object.create(Tape.prototype)\nTapeViz.prototype.constructor = TapeViz\n\nTapeViz.prototype.visualize = function (state, smooth) {\n    let rule = this.vis[state]\n    let all = this.wrapper.selectAll('.wrapper > g')\n    // all.classed('smooth-color', rule && smooth)\n    all.classed('smooth-color', true)\n    all.classed('green', false)\n        .classed('blue', false)\n        .classed('red', false)\n    if (!rule)\n        return\n    let cur = this.wrapper.selectAll('.wrapper > g:not(.exiting)')[0][this.lookaround]\n    let dir = rule.dir === '->' ? 'nextElementSibling' : 'previousElementSibling'\n    let skip = rule.skip ? rule.skip : 0\n    if (rule.mode === 'row') {\n        while (cur) {\n            let symbol = cur.querySelector('text').textContent\n            if (rule.chars.includes(symbol))\n                cur.classList.add(rule.color)\n            else\n                break\n            cur = cur[dir]\n        }\n    } else if (rule.mode === 'find') {\n        while (cur) {\n            let symbol = cur.querySelector('text').textContent\n            cur.classList.add(rule.color)\n            if (rule.chars.includes(symbol)) {\n                if (skip > 0)\n                    skip -= 1\n                else\n                    break\n            }\n            cur = cur[dir]\n        }\n    }\n}\n\n// IDEA: chain headLeft/Right to wait for write()?\nTapeViz.prototype.write = function (symbol, duration=250) {\n    // don't animate if symbol stays the same\n    if (Tape.prototype.read.call(this) === symbol) {\n        return\n    }\n    Tape.prototype.write.call(this, symbol)\n\n    // remove leftover .exiting in case animation was interrupted\n    this.wrapper.selectAll('.exiting').remove()\n\n    d3.select(this.wrapper[0][0].childNodes[this.lookaround])\n        .datum(symbol)\n        .select('text')\n        .attr('fill-opacity', '1')\n        .attr('stroke-opacity', '1')\n        .transition()\n        .duration(duration / 2)\n        .attr('fill-opacity', '0.4')\n        .attr('stroke-opacity', '0.1')\n        .transition()\n        .duration(duration / 2)\n        .text(function (d) {\n            return d\n        })\n        .attr('fill-opacity', '1')\n        .attr('stroke-opacity', '1')\n        .transition()\n        .duration(0)\n        .attr('fill-opacity', null)\n        .attr('stroke-opacity', null)\n\n}\n\nfunction moveHead(wrapper, enter, exit, wOffset, cOffset, duration=250) {\n    // add to one end\n    enter.call(initTapeCells)\n    // remove from the other end\n    exit.classed('exiting', true)\n    // translate cells forward, and the wrapper backwards\n    wrapper.selectAll('.tape-cell')\n        .call(positionCells, cOffset)\n    wrapper\n        .attr('transform', 'translate(' + (wOffset * cellWidth).toString() + ' 10)')\n        // animate wrapper returning to neutral position\n        .transition()\n        .duration(duration)\n        .call(repositionWrapper)\n}\n\nTapeViz.prototype.headRight = function (duration=250) {\n    Tape.prototype.headRight.call(this)\n    // remove leftover .exiting in case animation was interrupted.\n    // Important: call-by-value evaluates the selection argument(s) of 'moveHead' before\n    // before entering the function, so exiting nodes have to be removed beforehand.\n    this.wrapper.selectAll('.exiting').remove()\n    moveHead(this.wrapper,\n        // add to right end\n        this.wrapper.append('g')\n            .datum(this.readOffset(this.lookaround)),\n        // remove from left end\n        this.wrapper.select('.tape-cell'),\n        1, -1,\n        duration,\n    )\n}\n\nTapeViz.prototype.headLeft = function (duration=250) {\n    Tape.prototype.headLeft.call(this)\n    this.wrapper.selectAll('.exiting').remove()\n    moveHead(this.wrapper,\n        this.wrapper.insert('g', ':first-child')\n            .datum(this.readOffset(-this.lookaround)),\n        this.wrapper.select('.wrapper > .tape-cell:last-of-type'),\n        -1, 0,\n        duration,\n    )\n}\n\nmodule.exports = TapeViz\n","'use strict'\nvar _ = require('lodash/fp')\n\n// Bidirectional infinite tape\nfunction Tape(blank, input) {\n    Object.defineProperty(this, 'blank', {\n        value: blank,\n        writable: false,\n        enumerable: true,\n    })\n    // zipper data structure\n    // INVARIANTS: tape.before can be empty, tape.after must be nonempty.\n    // before: cells before the head (in order; left to right).\n    // after:  cells after and including the head (in reverse; right to left).\n    this.tape = {\n        before: [],\n        after: (input == null || input.length == 0) ? [blank] : input.slice().reverse(),\n        toString: function () {\n            return this.before.join('') + '🔎' + this.after.slice().reverse().join('')\n        },\n    }\n}\n\n// Read the value at the tape head.\nTape.prototype.read = function () {\n    return _.last(this.tape.after)\n}\nTape.prototype.write = function (symbol) {\n    this.tape.after[this.tape.after.length - 1] = symbol\n}\n\nTape.prototype.headRight = function () {\n    var before = this.tape.before,\n        after = this.tape.after\n    before.push(after.pop())\n    if (_.isEmpty(after)) {\n        after.push(this.blank)\n    }\n}\nTape.prototype.headLeft = function () {\n    var before = this.tape.before,\n        after = this.tape.after\n    if (_.isEmpty(before)) {\n        before.push(this.blank)\n    }\n    after.push(before.pop())\n}\n\nTape.prototype.toString = function () {\n    return this.tape.toString()\n}\n\n// for tape visualization. not part of TM definition.\n// Read the value at an offset from the tape head.\n// 0 is the tape head. + is to the right, - to the left.\nTape.prototype.readOffset = function (i) {\n    var tape = this.tape\n    if (i >= 0) {\n        // right side: offset [0..length-1] ↦ array index [length-1..0]\n        return (i <= tape.after.length - 1) ? tape.after[tape.after.length - 1 - i] : this.blank\n    } else {\n        // left side: offset [-1..-length] ↦ array index [length-1..0]\n        return (i >= -tape.before.length) ? tape.before[tape.before.length + i] : this.blank\n    }\n}\n\n// for tape visualization.\n// Read the values from an offset range (inclusive of start and end).\nTape.prototype.readRange = function (start, end) {\n    return _.range(start, end + 1).map(function (i) {\n        return this.readOffset(i)\n    }, this)\n}\n\nmodule.exports = Tape\n","module.exports = __webpack_public_path__ + \"tape/tape.css\";","'use strict'\n\nvar _ = require('lodash')\n\n\n/* Interface\n  type TransitionTable = {\n    [state: string]: ?{\n      [symbol: string]: Instruction\n    }\n  };\n  type Instruction = { state?: string, symbol?: string };\n\n  type DiagramGraph = {\n    [state: string]: {\n      label: string,\n      transitions: ?{\n        [symbol: string]: {\n          instruction: Instruction,\n          edge: LayoutEdge\n        }\n      }\n    }\n  };\n  type LayoutEdge = { source: Object, target: Object, labels: [string] }\n */\n\n/**\n * Use a transition table to derive the graph (vertices & edges) for a D3 diagram.\n * Edges with the same source and target are combined.\n * NB. In addition to single symbols, comma-separated symbols are supported.\n * e.g. symbol string '0,1,,,I' -> symbols [0,1,',','I'].\n */\n// TransitionTable -> DiagramGraph\nfunction deriveGraph(table, color_table) {\n    // We need two passes, since edges may point at vertices yet to be created.\n    // 1. Create all the vertices.\n    var graph = _.mapValues(table, function (transitions, state) {\n        return {\n            label: state,\n            transitions: transitions,\n            color: color_table[state],\n        }\n    })\n    // 2. Create the edges, which can now point at any vertex object.\n    var allEdges = []\n    _.forEach(graph, function (vertex, state) {\n\n        vertex.transitions = vertex.transitions && (function () {\n            let stateTransitions = {}\n\n            // Combine edges with the same source and target\n            let cache = {}\n\n            function edgeTo(target, label) {\n                let edge = cache[target] ||\n                    _.tap(cache[target] = { // WHAT THE FUCK?\n                        source: vertex,\n                        target: graph[target],\n                        labels: [],\n                    }, allEdges.push.bind(allEdges))\n                if (table.tapes < 3)\n                    edge.labels.push(label)\n                return edge\n            }\n\n            // Create symbol -> instruction object map\n            _.forEach(vertex.transitions, function (instruct, symbolKey) {\n                // Handle comma-separated symbols.\n                // Recreate array by splitting on ','. Treat 2 consecutive ',' as , ','.\n                let symbols = symbolKey.split(',').reduce(function (acc, x) {\n                    if (x === '' && acc[acc.length - 1] === '') {\n                        acc[acc.length - 1] = ','\n                    } else {\n                        acc.push(x)\n                    }\n                    return acc\n                }, [])\n                let target = instruct.state != null ? instruct.state : state\n                let edge = edgeTo(target, labelFor(symbols, instruct))\n\n                symbols.forEach(function (symbol) {\n                    stateTransitions[symbol] = {\n                        // Normalize for execution, but display the less-cluttered original.\n                        instruction: normalize(state, symbol, instruct),\n                        edge: edge,\n                    }\n                })\n            })\n\n            return stateTransitions\n        }())\n\n    })\n\n    return {graph: graph, edges: allEdges}\n}\n\n// Normalize an instruction to include an explicit state and symbol.\n// e.g. {symbol: '1'} normalizes to {state: 'q0', symbol: '1'} when in state q0.\nfunction normalize(state, symbol, instruction) {\n    symbol = symbol.split('')\n    if (instruction.symbol) {\n        for (let i = 0; i < symbol.length; i++) {\n            if (instruction.symbol[i])\n                symbol[i] = instruction.symbol[i]\n        }\n    }\n    return _.defaults({symbol: symbol.join('')}, instruction, {state: state})\n}\n\nfunction labelFor(symbols, action) {\n    var rightSide = ((action.symbol == null) ? '' : (visibleSpace(String(action.symbol)) + ','))\n        + String(action.move)\n    return symbols.map(visibleSpace).join(',') + '→' + rightSide\n}\n\n// replace ' ' with '␣'.\nfunction visibleSpace(c) {\n    return (c === ' ') ? '␣' : c\n}\n\n\n/**\n * Aids rendering and animating a transition table in D3.\n *\n * • Generates the vertices and edges (\"nodes\" and \"links\") for a D3 diagram.\n * • Provides mapping of each state to its vertex and each transition to its edge.\n * @param {TransitionTable} table\n */\nfunction StateGraph(table, color_table) {\n    var derived = deriveGraph(table, color_table)\n    Object.defineProperties(this, {\n        __graph: {value: derived.graph},\n        __edges: {value: derived.edges},\n    })\n}\n\n/**\n * D3 layout \"nodes\".\n */\n// StateGraph.prototype.getVertices = function () {\n//   return _.values(this.__graph);\n// };\n\n/**\n * Returns the mapping from states to vertices (D3 layout \"nodes\").\n * @return { {[state: string]: Object} }\n */\nStateGraph.prototype.getVertexMap = function () {\n    return this.__graph\n}\n\n/**\n * D3 layout \"links\".\n */\nStateGraph.prototype.getEdges = function () {\n    return this.__edges\n}\n\n/**\n * Look up a state's corresponding D3 \"node\".\n */\nStateGraph.prototype.getVertex = function (state) {\n    return this.__graph[state]\n}\n\nStateGraph.prototype.getInstructionAndEdge = function (state, symbol) {\n    var vertex = this.__graph[state]\n    if (vertex === undefined) {\n        throw new Error('not a valid state: ' + String(state))\n    }\n\n    return vertex.transitions && vertex.transitions[symbol]\n}\n\n\nmodule.exports = StateGraph\n","'use strict'\n\nvar isBrowserIEorEdge = require('../util').isBrowserIEorEdge\nvar d3 = require('d3')\nvar _ = require('lodash/fp')\nvar assign = require('lodash').assign // need mutable assign()\n\n// *** Arrays as vectors ***\n\n// Add vectors.\n// Note: dimensions are not checked. Missing dimensions become NaN.\nfunction addV(array1, array2) {\n    return array1.map(function (x, i) {\n        return x + array2[i]\n    })\n}\n\nfunction negateV(array) {\n    return array.map(function (x) {\n        return -x\n    })\n}\n\nfunction subtractV(array1, array2) {\n    return addV(array1, negateV(array2))\n}\n\n// Scale the vector by a scalar.\nfunction multiplyV(array, scalar) {\n    return array.map(function (x) {\n        return scalar * x\n    })\n}\n\n// Vector norm, squared\nfunction normSqV(array) {\n    function sq(x) {\n        return x * x\n    }\n\n    function add(x, y) {\n        return x + y\n    }\n\n    return array.map(sq).reduce(add, 0)\n}\n\n// Vector norm\nfunction normV(array) {\n    return Math.sqrt(normSqV(array))\n}\n\n// Return a copy of the vector rescaled as a unit vector (norm = 1).\nfunction unitV(array) {\n    var n = normV(array)\n    return array.map(function (x) {\n        return x / n\n    })\n}\n\n// *** 2D Vectors ***\nfunction angleV(array) {\n    var x = array[0], y = array[1]\n    return Math.atan2(y, x)\n}\n\nfunction vectorFromLengthAngle(length, angle) {\n    return [Math.cos(angle) * length, Math.sin(angle) * length]\n}\n\n// *** Utilities ***\n\n// Count the directed edges that start at a given node and end at another.\n// Important: each node must have a unique .index property.\n// Example usage:\n// var counts = new EdgeCounter(edges);\n// var edgesFrom2To5 = counts.numEdgesFromTo(2,5);\n// var edgesFrom5to2 = counts.numEdgesFromTo(5,2);\nfunction EdgeCounter(edges) {\n    edges.forEach(function (e) {\n        var key = e.source.index + ',' + e.target.index\n        this[key] = (this[key] || 0) + 1\n    }, this)\n}\n\nEdgeCounter.prototype.numEdgesFromTo = function (src, target) {\n    return this[String(src) + ',' + String(target)] || 0\n}\n\nvar EdgeShape = Object.freeze({\n    loop: {},     // self-loop: a->a\n    arc: {},      // curved arc: a->b when b->a exists\n    straight: {},  // straight edge: a->b when b->a does not exist\n})\n\nEdgeCounter.prototype.shapeForEdge = function (e) {\n    if (e.target.index === e.source.index) {\n        return EdgeShape.loop\n    } else if (this.numEdgesFromTo(e.target.index, e.source.index)) {\n        // has returning edge => arc\n        return EdgeShape.arc\n    } else {\n        return EdgeShape.straight\n    }\n}\n\n// create a function that will compute an edge's SVG 'd' attribute.\nfunction edgePathFor(nodeRadius, shape, d) {\n    // case: self-loop\n    var loopEndOffset, loopArc\n    if (shape === EdgeShape.loop) {\n        // start at the top (90°), end slightly above the right (15°)\n        loopEndOffset = vectorFromLengthAngle(nodeRadius, -15 * Math.PI / 180)\n        loopArc = ' a 19,27 45 1,1 ' + loopEndOffset[0] + ',' + (loopEndOffset[1] + nodeRadius)\n        return function () {\n            var x1 = d.source.x,\n                y1 = d.source.y\n            return 'M ' + x1 + ',' + (y1 - nodeRadius) + loopArc\n        }\n    }\n    // case: between nodes\n    if (shape === EdgeShape.arc) {\n        // sub-case: arc\n        return function () {\n            // note: p1 & p2 have to be delayed, to access x/y at the time of the call\n            var p1 = [d.source.x, d.source.y]\n            var p2 = [d.target.x, d.target.y]\n            var offset = subtractV(p2, p1)\n            var radius = 6 / 5 * normV(offset)\n            // Note: SVG's y-axis is flipped, so vector angles are negative\n            // relative to standard coordinates (as used in Math.atan2).\n            // Proof: angle(r <cos ϴ, -sin ϴ>) = angle(r <cos -ϴ, sin -ϴ>) = -ϴ.\n            var angle = angleV(offset)\n            var sep = -Math.PI / 2 / 2 // 90° separation, half on each side\n            var source = addV(p1, vectorFromLengthAngle(nodeRadius, angle + sep))\n            var target = addV(p2, vectorFromLengthAngle(nodeRadius, angle + Math.PI - sep))\n            // IDEA: consider http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands\n            return (p1[0] <= p2[0])\n                ? 'M ' + source[0] + ' ' + source[1] + ' A ' + radius + ' ' + radius + ' 0 0,1 ' + target[0] + ' ' + target[1]\n                : 'M ' + target[0] + ' ' + target[1] + ' A ' + radius + ' ' + radius + ' 0 0,0 ' + source[0] + ' ' + source[1]\n        }\n    } else if (shape === EdgeShape.straight) {\n        return function () {\n            // sub-case: straight line\n            var p1 = [d.source.x, d.source.y]\n            var p2 = [d.target.x, d.target.y]\n            var offset = subtractV(p2, p1)\n            // avoid spurious errors when bounding causes node centers to coincide\n            if (offset[0] === 0 && offset[1] === 0) {\n                return null\n            }\n\n            var target = subtractV(p2, multiplyV(unitV(offset), nodeRadius))\n            return 'M ' + p1[0] + ' ' + p1[1] + ' L ' + target[0] + ' ' + target[1]\n        }\n    }\n}\n\nfunction rectCenter(svgrect) {\n    return {\n        x: svgrect.x + svgrect.width / 2,\n        y: svgrect.y + svgrect.height / 2,\n    }\n}\n\nfunction identity(x) {\n    return x\n}\n\nfunction noop() {\n}\n\nfunction limitRange(min, max, value) {\n    return Math.max(min, Math.min(value, max))\n}\n\n// IE padding hack so that SVG resizes properly.\n// This works across browsers but we only need it for IE.\nvar appendSVGTo = !isBrowserIEorEdge\n    ? function (div) {\n        return div.append('svg')\n    }\n    : function (div, hwRatio) {\n        return div\n            .append('div')\n            .style({\n                width: '100%',\n                height: '0',\n                'padding-bottom': (100 * hwRatio) + '%',\n                position: 'relative',\n            })\n            .append('svg')\n            .style({\n                position: 'absolute',\n                top: '0',\n                left: '0',\n            })\n    }\n\n// *** D3 diagram ***\nrequire('./StateViz.css')\n\n// type LayoutNode = {label: string};\n// type StateMap = {[state: string]: LayoutNode};\n\n/**\n * Create a state diagram inside an SVG.\n * Each vertex/edge (node/link) object is also annotated with @.domNode@\n * corresponding to its SVG element.\n *\n * Note: currently, element IDs (e.g. for textPath) will collide if multiple\n * diagrams are on the same document (HTML page).\n * @param  {D3Selection}      container     Container to add the SVG to.\n * @param  {[LayoutNode] | StateMap} nodes  Parameter to D3's force.nodes.\n *   Important: passing a StateMap is recommended when using setPositionTable.\n *   Passing an array will key the state nodes by array index.\n * @param  {[LayoutEdge]}     linkArray     Parameter to D3's force.links.\n */\nfunction StateViz(container, nodes, linkArray) {\n    /* References:\n      [Sticky Force Layout](http://bl.ocks.org/mbostock/3750558) demonstrates\n      drag to position and double-click to release.\n\n      [Graph with labeled edges](http://bl.ocks.org/jhb/5955887) demonstrates\n      arrow edges with auto-rotated labels.\n    */\n\n    /* eslint-disable no-invalid-this */ // eslint is not familiar with D3\n    var w = 800\n    var h = 500\n    var linkDistance = 50\n    var nodeRadius = 20\n\n    var colors = d3.scale.category10()\n\n    var svg = appendSVGTo(container, h / w)\n    svg.attr({\n        'viewBox': [0, 0, w, h].join(' '),\n        'version': '1.1',\n        ':xmlns': 'http://www.w3.org/2000/svg',\n        ':xmlns:xlink': 'http://www.w3.org/1999/xlink',\n    })\n\n    // Force Layout\n\n    // drag event handlers\n    function dragstart(d) {\n        d.fixed = true\n        svg.transition()\n            .style('box-shadow', 'inset 0 0 1px gold')\n    }\n\n    function grid_snapping(d) {\n        const dh = 34.641\n        let row = Math.round(d.py / dh)\n        d.py = row * dh\n        if (row % 2 === 1) {\n            d.px += 20\n            d.px = Math.round(d.px / 40) * 40\n            d.px -= 20\n        } else {\n            d.px = Math.round(d.px / 40) * 40\n        }\n        d.x = d.px\n        d.y = d.py\n    }\n\n    function dragend() {\n        svg.transition()\n            .style('box-shadow', null)\n    }\n\n    function releasenode(d) {\n        d.fixed = false\n        force.resume()\n    }\n\n    // set up force layout\n    var nodeArray = nodes instanceof Array ? nodes : _.values(nodes)\n    this.__stateMap = nodes\n\n    var force = d3.layout.force()\n        .nodes(nodeArray)\n        .links(linkArray)\n        .size([w, h])\n        .linkDistance([linkDistance])\n        .charge([-300])\n        .theta(0.1)\n        .gravity(0.1)\n        .start()\n\n    var drag = force.drag()\n        .on('dragstart', dragstart)\n        .on('drag', grid_snapping)\n        .on('dragend', dragend)\n\n    // Edges\n    var edgeCounter = new EdgeCounter(linkArray)\n\n    var edgeselection = svg.selectAll('.edgepath')\n        .data(linkArray)\n        .enter()\n\n    var edgegroups = edgeselection.append('g')\n\n    var labelAbove = function (d, i) {\n        return String(-1.1 * (i + 1)) + 'em'\n    }\n    var labelBelow = function (d, i) {\n        return String(0.6 + 1.1 * (i + 1)) + 'em'\n    }\n\n    edgegroups.each(function (edgeD, edgeIndex) {\n        var group = d3.select(this)\n        var edgepath = group\n            .append('path')\n            .attr({\n                'class': 'edgepath',\n                'id': 'edgepath' + edgeIndex,\n            })\n            .each(function (d) {\n                d.domNode = this\n            })\n\n        var labels = group.selectAll('.edgelabel')\n            .data(edgeD.labels).enter()\n            .append('text')\n            .attr('class', 'edgelabel')\n        labels.append('textPath')\n            .attr('xlink:href', function () {\n                return '#edgepath' + edgeIndex\n            })\n            .attr('startOffset', '50%')\n            .text(identity)\n        /* To reduce JS computation, label positioning varies by edge shape:\n            * Straight edges can use a fixed 'dy' value.\n            * Loops cannot use 'dy' since it increases letter spacing\n              as labels get farther from the path. Instead, since a loop's shape\n              is fixed, it allows a fixed translate 'transform'.\n            * Arcs are bent and their shape is not fixed, so neither 'dy'\n              nor 'transform' can be constant.\n              Fortunately the curvature is slight enough that a fixed 'dy'\n              looks good enough without resorting to dynamic translations.\n        */\n        var shape = edgeCounter.shapeForEdge(edgeD)\n        edgeD.getPath = edgePathFor(nodeRadius, shape, edgeD)\n        switch (shape) {\n            case EdgeShape.straight:\n                labels.attr('dy', labelAbove)\n                edgeD.refreshLabels = function () {\n                    // flip edge labels that are upside-down\n                    labels.attr('transform', function () {\n                        if (edgeD.target.x < edgeD.source.x) {\n                            var c = rectCenter(this.getBBox())\n                            return 'rotate(180 ' + c.x + ' ' + c.y + ')'\n                        } else {\n                            return null\n                        }\n                    })\n                }\n                break\n            case EdgeShape.arc:\n                var isFlipped\n                edgeD.refreshLabels = function () {\n                    var shouldFlip = edgeD.target.x < edgeD.source.x\n                    if (shouldFlip !== isFlipped) {\n                        edgepath.classed('reversed-arc', shouldFlip)\n                        labels.attr('dy', shouldFlip ? labelBelow : labelAbove)\n                        isFlipped = shouldFlip\n                    }\n                }\n                break\n            case EdgeShape.loop:\n                labels.attr('transform', function (d, i) {\n                    return 'translate(' + String(8 * (i + 1)) + ' ' + String(-8 * (i + 1)) + ')'\n                })\n                edgeD.refreshLabels = noop\n                break\n        }\n    })\n    var edgepaths = edgegroups.selectAll('.edgepath')\n\n    // Nodes\n    // note: nodes are added after edges so as to paint over excess edge lines\n    var nodeSelection = svg.selectAll('.node')\n        .data(nodeArray)\n        .enter()\n\n    var nodecircles = nodeSelection\n        .append('circle')\n        .attr('class', 'node')\n        .attr('r', nodeRadius)\n        .style('fill', function (d, i) {\n            if (d.color !== undefined)\n                return '#' + d.color\n            return colors(i)\n        })\n        .each(function (d) {\n            d.domNode = this\n        })\n        .on('dblclick', releasenode)\n        .call(drag)\n\n    var nodelabels = nodeSelection\n        .append('text')\n        .attr('class', 'nodelabel')\n        .attr('dy', '0.25em') /* dy doesn't work in CSS */\n        .text(function (d) {\n            return d.label\n        })\n\n    // Arrowheads\n    var svgdefs = svg.append('defs')\n    svgdefs.selectAll('marker')\n        .data(['arrowhead', 'active-arrowhead', 'reversed-arrowhead', 'reversed-active-arrowhead'])\n        .enter().append('marker')\n        .attr({\n            'id': function (d) {\n                return d\n            },\n            'viewBox': '0 -5 10 10',\n            'refX': function (d) {\n                return (d.lastIndexOf('reversed-', 0) === 0) ? 0 : 10\n            },\n            'orient': 'auto',\n            'markerWidth': 10,\n            'markerHeight': 10,\n        })\n        .append('path')\n        .attr('d', 'M 0 -5 L 10 0 L 0 5 Z')\n        .attr('transform', function (d) {\n            return (d.lastIndexOf('reversed-', 0) === 0) ? 'rotate(180 5 0)' : null\n        })\n\n    var svgCSS =\n        '.edgepath {' +\n        '  marker-end: url(#arrowhead);' +\n        '}' +\n        '.edgepath.active-edge {' +\n        '  marker-end: url(#active-arrowhead);' +\n        '}' +\n        '.edgepath.reversed-arc {' +\n        '  marker-start: url(#reversed-arrowhead);' +\n        '  marker-end: none;' +\n        '}' +\n        '.edgepath.active-edge.reversed-arc {' +\n        '  marker-start: url(#reversed-active-arrowhead);' +\n        '  marker-end: none;' +\n        '}'\n    svg.append('style').each(function () {\n        if (this.styleSheet) {\n            this.styleSheet.cssText = svgCSS\n        } else {\n            this.textContent = svgCSS\n        }\n    })\n\n    // Force Layout Update\n    force.on('tick', function () {\n        // Keep coordinates in bounds. http://bl.ocks.org/mbostock/1129492\n        // NB. Bounding can cause node centers to coincide, especially at corners.\n        nodecircles.attr({\n            cx: function (d) {\n                return d.x = limitRange(nodeRadius, w - nodeRadius, d.x)\n            },\n            cy: function (d) {\n                return d.y = limitRange(nodeRadius, h - nodeRadius, d.y)\n            },\n        })\n\n        nodelabels.attr('x', function (d) {\n            return d.x\n        })\n            .attr('y', function (d) {\n                return d.y\n            })\n\n        edgepaths.attr('d', function (d) {\n            return d.getPath()\n        })\n\n        edgegroups.each(function (d) {\n            d.refreshLabels()\n        })\n\n        // Conserve CPU when layout is fully fixed\n        if (nodeArray.every(function (d) {\n            return d.fixed\n        })) {\n            force.stop()\n        }\n    })\n    this.force = force\n    /* eslint-enable no-invalid-this */\n}\n\n// Positioning\n\n// {[key: State]: Node} -> PositionTable\nvar getPositionTable = _.mapValues(_.pick(['x', 'y', 'px', 'py', 'fixed']))\n\n// Tag nodes w/ positions. Mutates the node map.\n// PositionTable -> {[key: State]: Node} -> void\nfunction setPositionTable(posTable, stateMap) {\n    _.forEach(function (node, state) {\n        var position = posTable[state]\n        if (position !== undefined) {\n            assign(node, position)\n        }\n    }, stateMap)\n}\n\nObject.defineProperty(StateViz.prototype, 'positionTable', {\n    get: function () {\n        return getPositionTable(this.__stateMap)\n    },\n    set: function (posTable) {\n        setPositionTable(posTable, this.__stateMap)\n        // ensure that a cooled layout will update\n        this.force.resume()\n    },\n})\n\n\nmodule.exports = StateViz\n","module.exports = __webpack_public_path__ + \"state-diagram/StateViz.css\";"],"sourceRoot":""}